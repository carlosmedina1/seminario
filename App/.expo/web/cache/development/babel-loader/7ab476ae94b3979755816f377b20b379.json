{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport FeatherIcon from \"@expo/vector-icons/Feather\";\nimport Route from \"../hooks/routes\";\nimport Message from \"../components/message\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  header: {\n    flex: 4,\n    backgroundColor: '#000',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    opacity: 0.3\n  },\n  title: {\n    color: '#fff',\n    fontWeight: 'bold',\n    fontSize: 35\n  },\n  body: {\n    borderTopRightRadius: 20,\n    borderTopLeftRadius: 20,\n    flex: 6,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    marginTop: -20,\n    padding: 20\n  },\n  formContainer: {\n    marginTop: 10\n  },\n  action: {\n    marginTop: 50,\n    marginBottom: 10,\n    flexDirection: 'row',\n    width: '90%',\n    borderBottomWidth: 1,\n    borderBottomColor: 'lightgray'\n  },\n  ingresarContainer: {\n    marginTop: 50\n  },\n  btnIngresar: {\n    backgroundColor: '#000',\n    width: 250,\n    height: 50,\n    borderRadius: 60,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  footer: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default function App(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pass = _useState4[0],\n      setPass = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      text = _useState6[0],\n      setText = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      logining = _useState8[0],\n      setLogining = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      message = _useState10[0],\n      setMessage = _useState10[1];\n\n  var handleLogin = function handleLogin() {\n    return _regeneratorRuntime.async(function handleLogin$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLogining(true);\n\n            if (!(user !== '' && pass !== '')) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(fetch(Route + 'login?user=' + user + '&pass=' + pass, {\n              method: 'POST'\n            }).then(function (response) {\n              return response.json();\n            }).then(function (data) {\n              if (data[0].login == 3) {\n                setText('Nombre de usuario incorrecto');\n                setMessage(true);\n                setLogining(false);\n              } else if (data[0].login == 2) {\n                setText('Contraseña incorrecta');\n                setMessage(true);\n                setLogining(false);\n              } else if (data[0].login == 1) {\n                _storeSession();\n\n                setLogining(false);\n              }\n            }).catch(function (error) {\n              console.error(error);\n              setLogining(false);\n            }));\n\n          case 4:\n            _context.next = 8;\n            break;\n\n          case 6:\n            setText('Debe ingresar todos los datos solicitados');\n            setMessage(true);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _storeSession = function _storeSession() {\n    return _regeneratorRuntime.async(function _storeSession$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('isLoged', 'true'));\n\n          case 3:\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', user));\n\n          case 5:\n            navigation.replace('Sync');\n            _context2.next = 13;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error('Error al guardar los datos para el inicio de sesión: ');\n            console.error(_context2.t0);\n            Alert.alert('Error al Iniciar Sesión', 'Hemos tenido un inconveniente al guardar los datos para el inicio de Sesión', [{\n              text: 'Entendido'\n            }]);\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  var _loadSession = function _loadSession() {\n    var session;\n    return _regeneratorRuntime.async(function _loadSession$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('isLoged'));\n\n          case 3:\n            session = _context3.sent;\n\n            if (session) {\n              navigation.replace('Sync');\n            } else {\n              console.log('sin sesión iniciada');\n            }\n\n            _context3.next = 12;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error('Error al traer los datos para el inicio de sesión: ');\n            console.error(_context3.t0);\n            Alert.alert('Error al Iniciar Sesión', 'Hemos tenido un inconveniente recuperar los datos para el inicio de Sesión', [{\n              text: 'Entendido'\n            }]);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    _loadSession();\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(StatusBar, {\n      barStyle: \"light-content\",\n      translucent: true,\n      backgroundColor: \"transparent\"\n    }), _jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Image, {\n        source: require(\"./image/loginBackground.jpeg\"),\n        style: styles.image\n      }), _jsx(Text, {\n        style: styles.title,\n        children: \"miSupervisor\"\n      })]\n    }), _jsxs(View, {\n      style: styles.body,\n      children: [_jsx(View, {\n        style: {\n          marginTop: 20\n        },\n        children: _jsx(Text, {\n          style: {\n            fontWeight: 'bold',\n            fontSize: 25,\n            color: '#000'\n          },\n          children: \"Iniciar Sesi\\xF3n\"\n        })\n      }), _jsxs(View, {\n        style: styles.action,\n        children: [_jsx(FeatherIcon, {\n          color: \"gray\",\n          name: \"user\",\n          size: 20,\n          style: {\n            marginBottom: 10,\n            marginRight: 10\n          }\n        }), _jsx(TextInput, {\n          placeholder: \"Nombre de Usuario\",\n          style: {\n            marginBottom: 10,\n            width: '100%'\n          },\n          onChangeText: function onChangeText(user) {\n            return setUser(user);\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.action,\n        children: [_jsx(FeatherIcon, {\n          color: \"gray\",\n          name: \"unlock\",\n          size: 20,\n          style: {\n            marginBottom: 10,\n            marginRight: 10\n          }\n        }), _jsx(TextInput, {\n          secureTextEntry: true,\n          placeholder: \"Contrase\\xF1a\",\n          style: {\n            marginBottom: 10,\n            width: '100%'\n          },\n          onChangeText: function onChangeText(pass) {\n            return setPass(pass);\n          }\n        })]\n      }), _jsx(View, {\n        style: styles.ingresarContainer,\n        children: logining ? _jsx(Text, {\n          style: {\n            fontWeight: 'bold',\n            fontSize: 20,\n            color: 'gray'\n          },\n          children: \"Ingresando...\"\n        }) : _jsx(TouchableOpacity, {\n          style: styles.btnIngresar,\n          onPress: function onPress() {\n            return handleLogin();\n          },\n          children: _jsx(Text, {\n            style: {\n              fontWeight: 'bold',\n              fontSize: 20,\n              color: '#fff'\n            },\n            children: \"Ingresar\"\n          })\n        })\n      })]\n    }), _jsx(View, {\n      style: styles.footer,\n      children: _jsx(Text, {\n        style: {\n          color: 'lightgray'\n        },\n        children: \"Desarrollado por DataMaule SpA.\"\n      })\n    }), _jsxs(Message, {\n      visibility: message,\n      children: [_jsx(View, {\n        children: _jsx(Text, {\n          style: {\n            fontSize: 15,\n            fontWeight: 'bold'\n          },\n          children: text\n        })\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setMessage(false);\n        },\n        style: {\n          backgroundColor: '#000',\n          borderRadius: 10,\n          width: 150,\n          height: 40,\n          marginTop: 20,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: _jsx(Text, {\n          style: {\n            fontSize: 15,\n            fontWeight: 'bold',\n            color: '#fff'\n          },\n          children: \"Aceptar\"\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"sources":["/Users/datamaule/workspace/miSupervisor/App/src/Login.js"],"names":["React","useEffect","useState","AsyncStorage","FeatherIcon","Route","Message","styles","StyleSheet","create","container","flex","header","backgroundColor","alignItems","justifyContent","image","width","height","position","opacity","title","color","fontWeight","fontSize","body","borderTopRightRadius","borderTopLeftRadius","marginTop","padding","formContainer","action","marginBottom","flexDirection","borderBottomWidth","borderBottomColor","ingresarContainer","btnIngresar","borderRadius","footer","App","navigation","user","setUser","pass","setPass","text","setText","logining","setLogining","message","setMessage","handleLogin","fetch","method","then","response","json","data","login","_storeSession","catch","error","console","setItem","replace","Alert","alert","_loadSession","getItem","session","log","require","marginRight"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;;;;;;;;;AAGA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,OAAOC,WAAP;AAEA,OAAOC,KAAP;AACA,OAAOC,OAAP;;;AAEA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC7BC,EAAAA,SAAS,EAAE;AACPC,IAAAA,IAAI,EAAE;AADC,GADkB;AAK7BC,EAAAA,MAAM,EAAE;AACJD,IAAAA,IAAI,EAAE,CADF;AAEJE,IAAAA,eAAe,EAAE,MAFb;AAGJC,IAAAA,UAAU,EAAE,QAHR;AAIJC,IAAAA,cAAc,EAAE;AAJZ,GALqB;AAY7BC,EAAAA,KAAK,EAAE;AACHC,IAAAA,KAAK,EAAE,MADJ;AAEHC,IAAAA,MAAM,EAAE,MAFL;AAGHC,IAAAA,QAAQ,EAAE,UAHP;AAIHC,IAAAA,OAAO,EAAE;AAJN,GAZsB;AAmB7BC,EAAAA,KAAK,EAAE;AACHC,IAAAA,KAAK,EAAE,MADJ;AAEHC,IAAAA,UAAU,EAAE,MAFT;AAGHC,IAAAA,QAAQ,EAAE;AAHP,GAnBsB;AAyB7BC,EAAAA,IAAI,EAAE;AACFC,IAAAA,oBAAoB,EAAE,EADpB;AAEFC,IAAAA,mBAAmB,EAAE,EAFnB;AAGFhB,IAAAA,IAAI,EAAE,CAHJ;AAIFE,IAAAA,eAAe,EAAE,MAJf;AAKFC,IAAAA,UAAU,EAAE,QALV;AAMFc,IAAAA,SAAS,EAAE,CAAC,EANV;AAOFC,IAAAA,OAAO,EAAE;AAPP,GAzBuB;AAmC7BC,EAAAA,aAAa,EAAE;AACXF,IAAAA,SAAS,EAAE;AADA,GAnCc;AAuC7BG,EAAAA,MAAM,EAAE;AACJH,IAAAA,SAAS,EAAE,EADP;AAEJI,IAAAA,YAAY,EAAE,EAFV;AAGJC,IAAAA,aAAa,EAAE,KAHX;AAIJhB,IAAAA,KAAK,EAAE,KAJH;AAKJiB,IAAAA,iBAAiB,EAAE,CALf;AAMJC,IAAAA,iBAAiB,EAAE;AANf,GAvCqB;AAgD7BC,EAAAA,iBAAiB,EAAE;AACfR,IAAAA,SAAS,EAAE;AADI,GAhDU;AAoD7BS,EAAAA,WAAW,EAAE;AACTxB,IAAAA,eAAe,EAAE,MADR;AAETI,IAAAA,KAAK,EAAE,GAFE;AAGTC,IAAAA,MAAM,EAAE,EAHC;AAIToB,IAAAA,YAAY,EAAE,EAJL;AAKTxB,IAAAA,UAAU,EAAE,QALH;AAMTC,IAAAA,cAAc,EAAE;AANP,GApDgB;AA6D7BwB,EAAAA,MAAM,EAAE;AACJ5B,IAAAA,IAAI,EAAE,CADF;AAEJE,IAAAA,eAAe,EAAE,MAFb;AAGJC,IAAAA,UAAU,EAAE,QAHR;AAIJC,IAAAA,cAAc,EAAE;AAJZ;AA7DqB,CAAlB,CAAf;AAqEA,eAAe,SAASyB,GAAT,OAA2B;AAAA,MAAbC,UAAa,QAAbA,UAAa;;AACtC,kBAAwBvC,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAOwC,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAwBzC,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAO0C,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAwB3C,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAO4C,IAAP;AAAA,MAAaC,OAAb;;AAEA,mBAAgC7C,QAAQ,CAAC,KAAD,CAAxC;AAAA;AAAA,MAAO8C,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAA8B/C,QAAQ,CAAC,KAAD,CAAtC;AAAA;AAAA,MAAOgD,OAAP;AAAA,MAAgBC,UAAhB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAChBH,YAAAA,WAAW,CAAC,IAAD,CAAX;;AADgB,kBAEbP,IAAI,KAAK,EAAT,IAAeE,IAAI,KAAK,EAFX;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAGNS,KAAK,CAAChD,KAAK,GAAC,aAAN,GAAoBqC,IAApB,GAAyB,QAAzB,GAAkCE,IAAnC,EAAyC;AAACU,cAAAA,MAAM,EAAE;AAAT,aAAzC,CAAL,CACLC,IADK,CACA,UAACC,QAAD;AAAA,qBAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,aADA,EAELF,IAFK,CAEA,UAACG,IAAD,EAAU;AACZ,kBAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAR,IAAiB,CAApB,EAAsB;AAClBZ,gBAAAA,OAAO,CAAC,8BAAD,CAAP;AACAI,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,gBAAAA,WAAW,CAAC,KAAD,CAAX;AACH,eAJD,MAKK,IAAGS,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAR,IAAiB,CAApB,EAAsB;AACvBZ,gBAAAA,OAAO,CAAC,uBAAD,CAAP;AACAI,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,gBAAAA,WAAW,CAAC,KAAD,CAAX;AACH,eAJI,MAKA,IAAGS,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAR,IAAiB,CAApB,EAAsB;AACvBC,gBAAAA,aAAa;;AACbX,gBAAAA,WAAW,CAAC,KAAD,CAAX;AACH;AACJ,aAjBK,EAkBLY,KAlBK,CAkBC,UAACC,KAAD,EAAW;AACdC,cAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAb,cAAAA,WAAW,CAAC,KAAD,CAAX;AACH,aArBK,CAHM;;AAAA;AAAA;AAAA;;AAAA;AA2BZF,YAAAA,OAAO,CAAC,2CAAD,CAAP;AACAI,YAAAA,UAAU,CAAC,IAAD,CAAV;;AA5BY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAgCA,MAAMS,aAAa,GAAG,SAAhBA,aAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAERzD,YAAY,CAAC6D,OAAb,CAAqB,SAArB,EAAgC,MAAhC,CAFQ;;AAAA;AAAA;AAAA,6CAGR7D,YAAY,CAAC6D,OAAb,CAAqB,MAArB,EAA6BtB,IAA7B,CAHQ;;AAAA;AAIdD,YAAAA,UAAU,CAACwB,OAAX,CAAmB,MAAnB;AAJc;AAAA;;AAAA;AAAA;AAAA;AAOdF,YAAAA,OAAO,CAACD,KAAR,CAAc,uDAAd;AACAC,YAAAA,OAAO,CAACD,KAAR;AAEAI,YAAAA,KAAK,CAACC,KAAN,CACI,yBADJ,EAEI,6EAFJ,EAGI,CAAC;AAACrB,cAAAA,IAAI,EAAE;AAAP,aAAD,CAHJ;;AAVc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAkBA,MAAMsB,YAAY,GAAG,SAAfA,YAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAESjE,YAAY,CAACkE,OAAb,CAAqB,SAArB,CAFT;;AAAA;AAEPC,YAAAA,OAFO;;AAGb,gBAAGA,OAAH,EAAW;AACP7B,cAAAA,UAAU,CAACwB,OAAX,CAAmB,MAAnB;AACH,aAFD,MAGK;AACDF,cAAAA,OAAO,CAACQ,GAAR,CAAY,qBAAZ;AACH;;AARY;AAAA;;AAAA;AAAA;AAAA;AAWbR,YAAAA,OAAO,CAACD,KAAR,CAAc,qDAAd;AACAC,YAAAA,OAAO,CAACD,KAAR;AAEAI,YAAAA,KAAK,CAACC,KAAN,CACI,yBADJ,EAEI,4EAFJ,EAGI,CAAC;AAACrB,cAAAA,IAAI,EAAE;AAAP,aAAD,CAHJ;;AAda;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAsBA7C,EAAAA,SAAS,CAAC,YAAM;AACZmE,IAAAA,YAAY;AACf,GAFQ,EAEP,EAFO,CAAT;AAIA,SACI,MAAC,IAAD;AAAM,IAAA,KAAK,EAAE7D,MAAM,CAACG,SAApB;AAAA,eACI,KAAC,SAAD;AAAW,MAAA,QAAQ,EAAG,eAAtB;AAAsC,MAAA,WAAW,MAAjD;AAAkD,MAAA,eAAe,EAAC;AAAlE,MADJ,EAGI,MAAC,IAAD;AAAM,MAAA,KAAK,EAAEH,MAAM,CAACK,MAApB;AAAA,iBACI,KAAC,KAAD;AAAO,QAAA,MAAM,EAAI4D,OAAO,gCAAxB;AAA0D,QAAA,KAAK,EAAEjE,MAAM,CAACS;AAAxE,QADJ,EAEI,KAAC,IAAD;AAAM,QAAA,KAAK,EAAET,MAAM,CAACc,KAApB;AAAA;AAAA,QAFJ;AAAA,MAHJ,EAQI,MAAC,IAAD;AAAM,MAAA,KAAK,EAAEd,MAAM,CAACkB,IAApB;AAAA,iBACI,KAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACG,UAAAA,SAAS,EAAE;AAAZ,SAAb;AAAA,kBACI,KAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAACL,YAAAA,UAAU,EAAE,MAAb;AAAqBC,YAAAA,QAAQ,EAAE,EAA/B;AAAmCF,YAAAA,KAAK,EAAE;AAA1C,WAAb;AAAA;AAAA;AADJ,QADJ,EAKI,MAAC,IAAD;AAAM,QAAA,KAAK,EAAEf,MAAM,CAACwB,MAApB;AAAA,mBACI,KAAC,WAAD;AAAa,UAAA,KAAK,EAAC,MAAnB;AAA0B,UAAA,IAAI,EAAC,MAA/B;AAAsC,UAAA,IAAI,EAAE,EAA5C;AAAgD,UAAA,KAAK,EAAE;AAACC,YAAAA,YAAY,EAAE,EAAf;AAAmByC,YAAAA,WAAW,EAAE;AAAhC;AAAvD,UADJ,EAEI,KAAC,SAAD;AAAW,UAAA,WAAW,EAAC,mBAAvB;AAA2C,UAAA,KAAK,EAAE;AAACzC,YAAAA,YAAY,EAAE,EAAf;AAAmBf,YAAAA,KAAK,EAAE;AAA1B,WAAlD;AAAqF,UAAA,YAAY,EAAI,sBAACyB,IAAD;AAAA,mBAAUC,OAAO,CAACD,IAAD,CAAjB;AAAA;AAArG,UAFJ;AAAA,QALJ,EAUI,MAAC,IAAD;AAAM,QAAA,KAAK,EAAEnC,MAAM,CAACwB,MAApB;AAAA,mBACI,KAAC,WAAD;AAAa,UAAA,KAAK,EAAC,MAAnB;AAA0B,UAAA,IAAI,EAAC,QAA/B;AAAwC,UAAA,IAAI,EAAE,EAA9C;AAAkD,UAAA,KAAK,EAAE;AAACC,YAAAA,YAAY,EAAE,EAAf;AAAmByC,YAAAA,WAAW,EAAE;AAAhC;AAAzD,UADJ,EAEI,KAAC,SAAD;AAAW,UAAA,eAAe,EAAE,IAA5B;AAAkC,UAAA,WAAW,EAAC,eAA9C;AAA2D,UAAA,KAAK,EAAE;AAACzC,YAAAA,YAAY,EAAE,EAAf;AAAmBf,YAAAA,KAAK,EAAE;AAA1B,WAAlE;AAAqG,UAAA,YAAY,EAAI,sBAAC2B,IAAD;AAAA,mBAAUC,OAAO,CAACD,IAAD,CAAjB;AAAA;AAArH,UAFJ;AAAA,QAVJ,EAeI,KAAC,IAAD;AAAM,QAAA,KAAK,EAAErC,MAAM,CAAC6B,iBAApB;AAAA,kBAEQY,QAAQ,GACJ,KAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAACzB,YAAAA,UAAU,EAAE,MAAb;AAAqBC,YAAAA,QAAQ,EAAE,EAA/B;AAAmCF,YAAAA,KAAK,EAAE;AAA1C,WAAb;AAAA;AAAA,UADI,GAGJ,KAAC,gBAAD;AAAkB,UAAA,KAAK,EAAEf,MAAM,CAAC8B,WAAhC;AAA6C,UAAA,OAAO,EAAE;AAAA,mBAAMe,WAAW,EAAjB;AAAA,WAAtD;AAAA,oBACI,KAAC,IAAD;AAAM,YAAA,KAAK,EAAE;AAAC7B,cAAAA,UAAU,EAAE,MAAb;AAAqBC,cAAAA,QAAQ,EAAE,EAA/B;AAAmCF,cAAAA,KAAK,EAAE;AAA1C,aAAb;AAAA;AAAA;AADJ;AALZ,QAfJ;AAAA,MARJ,EAoCI,KAAC,IAAD;AAAM,MAAA,KAAK,EAAEf,MAAM,CAACgC,MAApB;AAAA,gBACI,KAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACjB,UAAAA,KAAK,EAAE;AAAR,SAAb;AAAA;AAAA;AADJ,MApCJ,EAwCI,MAAC,OAAD;AAAS,MAAA,UAAU,EAAE4B,OAArB;AAAA,iBACI,KAAC,IAAD;AAAA,kBACI,KAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAC1B,YAAAA,QAAQ,EAAE,EAAX;AAAeD,YAAAA,UAAU,EAAE;AAA3B,WAAb;AAAA,oBAAkDuB;AAAlD;AADJ,QADJ,EAKI,KAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE;AAAA,iBAAMK,UAAU,CAAC,KAAD,CAAhB;AAAA,SAA3B;AAAoD,QAAA,KAAK,EAAE;AAACtC,UAAAA,eAAe,EAAE,MAAlB;AAA0ByB,UAAAA,YAAY,EAAE,EAAxC;AAA4CrB,UAAAA,KAAK,EAAE,GAAnD;AAAwDC,UAAAA,MAAM,EAAE,EAAhE;AAAoEU,UAAAA,SAAS,EAAE,EAA/E;AAAmFd,UAAAA,UAAU,EAAE,QAA/F;AAAyGC,UAAAA,cAAc,EAAE;AAAzH,SAA3D;AAAA,kBACI,KAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAACS,YAAAA,QAAQ,EAAE,EAAX;AAAeD,YAAAA,UAAU,EAAE,MAA3B;AAAmCD,YAAAA,KAAK,EAAE;AAA1C,WAAb;AAAA;AAAA;AADJ,QALJ;AAAA,MAxCJ;AAAA,IADJ;AAoDH","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { StyleSheet, Text, TextInput, View, Image, StatusBar, TouchableOpacity, Alert } from 'react-native';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage'\nimport FeatherIcon from 'react-native-vector-icons/Feather'\n\nimport Route from '../hooks/routes'\nimport Message from '../components/message'\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n\n    header: {\n        flex: 4,\n        backgroundColor: '#000',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n\n    image: {\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n        opacity: 0.3,\n    },\n\n    title: {\n        color: '#fff',\n        fontWeight: 'bold',\n        fontSize: 35,\n    },\n\n    body: {\n        borderTopRightRadius: 20,\n        borderTopLeftRadius: 20,\n        flex: 6,\n        backgroundColor: '#fff',\n        alignItems: 'center',\n        marginTop: -20,\n        padding: 20,\n    },\n\n    formContainer: {\n        marginTop: 10,\n    },\n\n    action: {\n        marginTop: 50,\n        marginBottom: 10,\n        flexDirection: 'row',\n        width: '90%',\n        borderBottomWidth: 1,\n        borderBottomColor: 'lightgray'\n    },\n\n    ingresarContainer: {\n        marginTop: 50,\n    },\n\n    btnIngresar: {\n        backgroundColor: '#000',\n        width: 250,\n        height: 50,\n        borderRadius: 60,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n\n    footer: {\n        flex: 1,\n        backgroundColor: '#fff',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n});\n\nexport default function App({navigation}) {\n    const [user, setUser] = useState('')\n    const [pass, setPass] = useState('')\n    const [text, setText] = useState('')\n\n    const [logining, setLogining] = useState(false)\n    const [message, setMessage] = useState(false)\n\n    const handleLogin = async() => {\n        setLogining(true)\n        if(user !== '' && pass !== '') {\n            await fetch(Route+'login?user='+user+'&pass='+pass, {method: 'POST'})\n            .then((response) => response.json())\n            .then((data) => {\n                if(data[0].login == 3){\n                    setText('Nombre de usuario incorrecto')\n                    setMessage(true)\n                    setLogining(false)\n                }\n                else if(data[0].login == 2){\n                    setText('Contraseña incorrecta')\n                    setMessage(true)\n                    setLogining(false)\n                }\n                else if(data[0].login == 1){\n                    _storeSession()\n                    setLogining(false)\n                }\n            })\n            .catch((error) => {\n                console.error(error)\n                setLogining(false)\n            })\n        }\n        else {\n            setText('Debe ingresar todos los datos solicitados')\n            setMessage(true)\n        }\n    }\n\n    const _storeSession = async() => {\n        try {\n            await AsyncStorage.setItem('isLoged', 'true')\n            await AsyncStorage.setItem('user', user)\n            navigation.replace('Sync')\n        }\n        catch(e) {\n            console.error('Error al guardar los datos para el inicio de sesión: ')\n            console.error(e)\n\n            Alert.alert(\n                'Error al Iniciar Sesión',\n                'Hemos tenido un inconveniente al guardar los datos para el inicio de Sesión',\n                [{text: 'Entendido',}]\n            )\n        }\n    }\n\n    const _loadSession = async() => {\n        try {\n            const session = await AsyncStorage.getItem('isLoged')\n            if(session){\n                navigation.replace('Sync')\n            }\n            else {\n                console.log('sin sesión iniciada')\n            }\n        }\n        catch(e){\n            console.error('Error al traer los datos para el inicio de sesión: ')\n            console.error(e)\n\n            Alert.alert(\n                'Error al Iniciar Sesión',\n                'Hemos tenido un inconveniente recuperar los datos para el inicio de Sesión',\n                [{text: 'Entendido',}]\n            )\n        }\n    }\n\n    useEffect(() => {\n        _loadSession()\n    },[])\n\n    return (\n        <View style={styles.container}>\n            <StatusBar barStyle = 'light-content' translucent backgroundColor=\"transparent\"/>\n\n            <View style={styles.header}>\n                <Image source = {require('./image/loginBackground.jpeg')} style={styles.image} />\n                <Text style={styles.title}>miSupervisor</Text>\n            </View>\n\n            <View style={styles.body}>\n                <View style={{marginTop: 20}}>\n                    <Text style={{fontWeight: 'bold', fontSize: 25, color: '#000'}}>Iniciar Sesión</Text>\n                </View>\n\n                <View style={styles.action}>\n                    <FeatherIcon color=\"gray\" name=\"user\" size={20} style={{marginBottom: 10, marginRight: 10}}/>\n                    <TextInput placeholder=\"Nombre de Usuario\" style={{marginBottom: 10, width: '100%'}} onChangeText = {(user) => setUser(user)}/>\n                </View>\n\n                <View style={styles.action}>\n                    <FeatherIcon color=\"gray\" name=\"unlock\" size={20} style={{marginBottom: 10, marginRight: 10}}/>\n                    <TextInput secureTextEntry={true} placeholder=\"Contraseña\" style={{marginBottom: 10, width: '100%'}} onChangeText = {(pass) => setPass(pass)}/>\n                </View>\n\n                <View style={styles.ingresarContainer}>\n                    {\n                        logining ? (\n                            <Text style={{fontWeight: 'bold', fontSize: 20, color: 'gray'}}>Ingresando...</Text>\n                        ) : (\n                            <TouchableOpacity style={styles.btnIngresar} onPress={() => handleLogin()}>\n                                <Text style={{fontWeight: 'bold', fontSize: 20, color: '#fff'}}>Ingresar</Text>\n                            </TouchableOpacity>\n                        )\n                    }\n                </View>\n            </View>\n\n            <View style={styles.footer}>\n                <Text style={{color: 'lightgray',}}>Desarrollado por DataMaule SpA.</Text>\n            </View>\n\n            <Message visibility={message}>\n                <View>\n                    <Text style={{fontSize: 15, fontWeight: 'bold'}}>{text}</Text>\n                </View>\n\n                <TouchableOpacity onPress={() => setMessage(false)} style={{backgroundColor: '#000', borderRadius: 10, width: 150, height: 40, marginTop: 20, alignItems: 'center', justifyContent: 'center'}}>\n                    <Text style={{fontSize: 15, fontWeight: 'bold', color: '#fff'}}>Aceptar</Text>\n                </TouchableOpacity>\n            </Message>\n        </View>\n    );\n}"]},"metadata":{},"sourceType":"module"}